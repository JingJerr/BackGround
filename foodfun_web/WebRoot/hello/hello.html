<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>html</title>
	<!--jquery文件-->
        <script src="js/jquery.min.js" type="text/javascript"></script>
        <!--jcrop文件-->
        <script src="js/jquery.Jcrop.js" type="text/javascript"></script>
        <link rel="stylesheet" href="css/jquery.Jcrop.css" type="text/css" />
        <!--异步上传文件-->
		<script src="js/ajaxfileupload.js" type="text/javascript"></script>
</head>
<body>
		<input type="file" name="img_poster" id="img_poster" onchange="ajaxFileUpload()"/>
		
		<img src="image/sago.jpg" id="img1" alt="[Jcrop Example]" />
		
		
		<script type="text/javascript">
			//ajax文件上传
			function ajaxFileUpload() {
					$.ajaxFileUpload({
							url: 'hello/upload', //用于文件上传的服务器端请求地址
							secureuri: false, //一般设置为false
							fileElementId: 'img_poster', //文件上传空间的id属性
							dataType: 'json', //返回值类型 一般设置为json
							success: function (data, status){  //服务器成功响应处理函数
								$("#img1").attr("src", data.fileName).show();
								
							},error: function (data, status, e)//服务器响应失败处理函数
							 {
								alert("系统错误：请检查图片尺寸及大小是否符合要求");
							 }
						});				
				}
		</script>
</body>
</html>